<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="澈崽子"><meta name="copyright" content="澈崽子"><meta name="generator" content="Hexo 5.0.0"><meta name="theme" content="hexo-theme-yun"><title>Cisco 常用命令 | 澈崽子 | 家有网工初长成</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="none" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.19/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_stqaphw3j4.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script defer src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.css"><script defer src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/auto-render.min.js"></script><script>document.addEventListener("DOMContentLoaded", function() {
  renderMathInElement(document.body, {
    delimiters: [
      {left: "$$", right: "$$", display: true},
      {left: "$", right: "$", display: false},
      {left: "\\(", right: "\\)", display: false},
      {left: "\\[", right: "\\]", display: true}
    ]
  });
});</script><link class="aplayer-style-marker" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script class="aplayer-script-marker" src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" defer></script><script class="meting-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js" defer></script><link rel="shortcut icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"root":"/","title":"澈崽子的小窝","version":"0.9.5","anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><meta name="description" content="一、交换部分 1.显示交换表大型交换机：Swtich-6509#show cam dynamic小型交换机：Switch-3548#show mac-address-table 2.连接交换机Console口进行配置使用RJ-45到9针或25针异步串行接口的信号电缆速率          9600数据位        8奇偶效验      无停止位        1数据流控制    硬件 3.进入">
<meta property="og:type" content="article">
<meta property="og:title" content="Cisco 常用命令">
<meta property="og:url" content="https://zeozzz.github.com/2019/04/24/12/index.html">
<meta property="og:site_name" content="澈崽子 | 家有网工初长成">
<meta property="og:description" content="一、交换部分 1.显示交换表大型交换机：Swtich-6509#show cam dynamic小型交换机：Switch-3548#show mac-address-table 2.连接交换机Console口进行配置使用RJ-45到9针或25针异步串行接口的信号电缆速率          9600数据位        8奇偶效验      无停止位        1数据流控制    硬件 3.进入">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-04-24T07:08:05.000Z">
<meta property="article:modified_time" content="2019-04-24T07:10:26.395Z">
<meta property="article:author" content="澈崽子">
<meta property="article:tag" content="Cisco">
<meta name="twitter:card" content="summary"></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script defer src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button sidebar-nav-active" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel sidebar-panel-active" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="澈崽子"><img width="96" loading="lazy" src="/avatar.jfif" alt="澈崽子"></a><div class="site-author-name"><a href="/about/">澈崽子</a></div><a class="site-name" href="/about/site.html">澈崽子 | 家有网工初长成</a><sub class="site-subtitle"></sub><div class="site-desciption">念念不忘 必有回响</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">74</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">29</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">36</span></a></div><a class="site-state-item hty-icon-button" href="/null" title="常用文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="QQ 群" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Zeozzz" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://weibo.com/linche521chn" title="微博" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.douban.com/people/zeozzz/" title="豆瓣" target="_blank" style="color:#007722"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-douban-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=46666755" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/janz1995chn/activities" title="知乎" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/15054940" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/zeozzz" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/zeozzz" title="Telegram Channel" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:zhangzhe@live.in" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.now.sh/" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-send-plane-2-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" target="_blank" rel="noopener" href="https://huawei.com" title="华为文档" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-huawei-line"></use></svg></a></div></div><div class="sidebar-panel" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content">此文章未包含目录</div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://zeozzz.github.com/2019/04/24/12/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="澈崽子"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="澈崽子 | 家有网工初长成"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Cisco 常用命令</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2019-04-24 15:08:05" itemprop="dateCreated datePublished" datetime="2019-04-24T15:08:05+08:00">2019-04-24</time></div><span class="post-busuanzi"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span id="busuanzi_value_page_pv"></span></span></span><div class="post-classify"><span class="post-tag"><a class="tag" href="/tags/Cisco/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Cisco</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><p>一、交换部分</p>
<p>1.显示交换表<br>大型交换机：<br>Swtich-6509#show cam dynamic<br>小型交换机：<br>Switch-3548#show mac-address-table</p>
<p>2.连接交换机Console口进行配置<br>使用RJ-45到9针或25针异步串行接口的信号电缆<br>速率          9600<br>数据位        8<br>奇偶效验      无<br>停止位        1<br>数据流控制    硬件</p>
<p>3.进入特权模式<br>Switch-3548&gt;enable<br>Swtich-6509&gt;enable</p>
<p>4.配置主机名：<br>Switch-3548(config)#hostname Switch1<br>Swtich-6509&gt;(enable)set system name Switch1</p>
<p>5.设置系统提示：<br>Swtich-6509&gt;(enable)set prompt Switch1</p>
<p>6.配置超级用户口令<br>Switch-3548(config)#enable password cisco (明文口令)<br>Switch-3548(config)#enable password 7 cisco (加密口令)<br>Switch-3548(config)#enable secret cisco   (加密口令)</p>
<p>Swtich-6509&gt;(enable)set enablepass</p>
<p>7.配置远程登录口令<br>Switch-3548(config)#line vty 0 4<br>Switch-3548(config-line)#password 0 zzz   (明文口令)<br>Switch-3548(config-line)#password 7 zzz   (加密口令)</p>
<p>Swtich-6509&gt;(enable)set password</p>
<p>8.设置系统时间<br>Switch-3548#clock set 21:11:12 24 May 2010</p>
<p>Swtich-6509&gt;(enable)set time fri 2/23/2007 23:00:00</p>
<p>9.配置设备管理IP地址<br>Switch-3548(config)#interface vlan1<br>Switch-3548(config-if)#ip address 10.0.0.5 255.255.255.0 (配置IP地址为10.0.0.5/24)<br>Switch-3548(config-if)#ip default-gateway 10.0.0.1 (配置缺省路由为10.0.0.1)</p>
<p>Swtich-6509&gt;(enable)set interface sc0 10.0.0.5 255.255.255.0 10.0.0.255 (配置IP地址为10.0.0.5/24 最后为广播地址)<br>Swtich-6509&gt;(enable)set ip route 0.0.0.0 10.0.0.1 (配置缺省路由为10.0.0.1 0.0.0.0表示缺省路由)</p>
<p>10.配置交换机端口描述信息<br>Switch-3548(config)#interface fa0/2<br>Switch-3548(config-if)#description This_is_to_Xianan (设置描述信息为This_is_to_Xianan)</p>
<p>Swtich-6509&gt;(enable)set port name 0/2 This_is_to_Xianan (设置描述信息为This_is_to_Xianan)</p>
<p>11.开启关闭端口<br>Switch-3548(config)#interface fa0/2<br>Switch-3548(config-if)#shutdown    (关闭端口)<br>Switch-3548(config-if)#no shutdown (开启端口)</p>
<p>Swtich-6509&gt;(enable)set port enable 0/2   (关闭端口)<br>Swtich-6509&gt;(enable)set port disable 0/2 (开启端口)</p>
<p>12.配置交换机端口通信方式<br>Switch-3548(config)#interface fa0/2 (进入端口)<br>Switch-3548(config-if)#deplex auto   (设置端口为自适应)<br>Switch-3548(config-if)#duplex full   (设置端口为全双工)<br>Switch-3548(config-if)#duplex half   (设置端口为半双工)</p>
<p>Swtich-6509&gt;(enable)set port duplex 0/1 full     (设置端口为全双工)<br>Swtich-6509&gt;(enable)set port duplex 0/1-24 full<br>Swtich-6509&gt;(enable)set port duplex 0/1 half     (设置端口为半双工)<br>Swtich-6509&gt;(enable)set port duplex 0/1-24 half</p>
<p>12.配置交换机端口传输速率<br>Switch-3548(config-if)#speed auto    (设置端口自动速率配置)<br>Switch-3548(config-if)#speed 100    (设置端口速率为100M)<br>Switch-3548(config-if)#speed 10    (设置端口速率为10M)</p>
<p>Swtich-6509&gt;(enable)set port speed 0/1 auto      (设置端口自动速率配置)<br>Swtich-6509&gt;(enable)set port speed 0/1-24 auto<br>Swtich-6509&gt;(enable)set port speed 0/1-24 10      (设置端口速率为10M)<br>Swtich-6509&gt;(enable)set port speed 0/1-24 100     (设置端口速率为100M)<br>Swtich-6509&gt;(enable)set port speed 0/1-24 1000    (设置端口速率为1000M)</p>
<p>13.配置VTP<br>Switch-3548#config t<br>Switch-3548(config)#vtp domain cisco      (设置VTP域名为cisco)<br>Switch-3548(config)#vtp mode server       (设置为VTP Server模式，缺省值)<br>Switch-3548(config)#vtp mode client       (设置为VTP client模式)<br>Switch-3548(config)#vtp mode transparent (设置为VTP Transparent模式)<br>Switch-3548(config)#vtp password cisco    (设置为VTP密码为cisco)</p>
<p>Swtich-6509&gt;(enable)set vtp domain cisco      (设置VTP域名为cisco)<br>Swtich-6509&gt;(enable)set vtp mode server       (设置为VTP Server模式，缺省值)<br>Swtich-6509&gt;(enable)set vtp mode client       (设置为VTP client模式)<br>Swtich-6509&gt;(enable)set vtp mode transparent (设置为VTP Transparent模式)<br>Swtich-6509&gt;(enable)set vtp password cisco    (设置为VTP密码为cisco)<br>Swtich-6509&gt;(enable)set vtp mode off          (关闭VTP)</p>
<p>14.建立和删除VLAN<br>老版本：<br>Switch-3548#config t<br>Switch-3548(config)#vlan data<br>Switch-3548(vlan)#vlan 200 name vlan200 (建立vlan 200，命名为vlan200)<br>Switch-3548(vlan)#vlan 200 name v200     (修改vlan 200，命名为v200)<br>Switch-3548(vlan)#no vlan 200      (删除vlan 200)<br>Switch-3548(vlan)#exit<br>新版本：<br>Switch-3548#config t<br>Switch-3548(config)#vlan 200         (建立vlan 200)<br>Switch-3548(config-if)#name vlan200 (命名为vlan200)<br>Switch-3548(config-if)#exit<br>Switch-3548(config)#no vlan 200 (删除vlan 200)</p>
<p>Swtich-6509&gt;(enable)set vlan 200 name vlan200      (建立vlan 200，命名为vlan200)<br>Swtich-6509&gt;(enable)set vlan 200 name v200       (修改vlan 200，命名为v200)<br>Swtich-6509&gt;(enable)clear vlan 200       (删除vlan 200)</p>
<p>Switch-3548(config)#interface fa0/1<br>Switch-3548(config-if)#switchport mode access   (设置端口模式为access)<br>Switch-3548(config-if)#switchport mode trunk    (设置端口模式为trunk)<br>Switch-3548(config-if)#switchport access vlan 200 (将端口分配到vlan200)</p>
<p>Swtich-6509&gt;(enable)set vlan 200 0/1 (将端口0/1划分到vlan 200)</p>
<p>15.VLAN Trunk 的配置<br>Switch-3548(config-if)#switchport mode trunk    (设置端口模式为trunk)<br>Switch-3548(config-if)#switchport trunk encapsulation dot1q    (封装IEEE 802.1Q)<br>Switch-3548(config-if)#switchport trunk encapsulation ISL (封装ISL)<br>Switch-3548(config-if)#switchport trunk encapsulution negotiate P (自动协商封装方式)<br>Switch-3548(config-if)#switchport trunk allowed vlan 10,14   (设置允许中继的VLAN 10 24)<br>Switch-3548(config-if)#switchprot trunk allowed vlan 10-24 (设置允许中继的VLAN 10-24)<br>Switch-3548(config-if)#switchport trunk allowed valn except 100-1000 (除去100-1000的VLAN，其他允许中继)</p>
<p>Swtich-6509&gt;(enable)set trunk 0/1 on dot1q   (设置端口0/1模式为trunk 封装IEEE 802.1Q)<br>Swtich-6509&gt;(enable)set trunk 0/1 vlan 10-24   (设置允许中继的VLAN 10-24)<br>Swtich-6509&gt;(enable)clear trunk 0/1 vlan 13-20   (除去13-20的VLAN，其他允许中继)</p>
<p>16.打开关闭STP<br>Switch-3548(config)#spanning-tree valn 3 (VLAN3启用STP)<br>Switch-3548(config)#no spanning-tree vlan 3 (VLAN3关闭STP)</p>
<p>Swtich-6509&gt;(enable)set spantree enable 3   (VLAN3启用STP)<br>Swtich-6509&gt;(enable)set spantree disable 3 (VLAN3关闭STP)</p>
<p>17.配置根网桥和备份根网桥<br>Switch-3548(config)#spanning-tree vlan 3 root primary (配置VLAN3为主根网桥)<br>Switch-3548(config)#spanning-tree vlan 3 root secondary (配置VLAN3为备份根网桥)</p>
<p>Swtich-6509&gt;(enable)set spantree root 1,200-204   (配置VLAN1,VLAN200-VLAN204为主根网桥)<br>Swtich-6509&gt;(enable)set spantree root 1,200-204   (配置VLAN1,VLAN200-VLAN204为备份根网桥)<br>Swtich-6509&gt;(enable)set spantree disable 3 (VLAN3关闭STP)</p>
<p>18.配置生成树优先级<br>Switch-3548(config)#spanning-tree vlan 3 priority 8192 (配置VLAN3的优先级为8192)</p>
<p>Swtich-6509&gt;(enable)set spantree priority 8192 (配置优先级为8192)</p>
<p>19.配置生成树可选项<br>Switch-3548(config)#spanning-tree backbonefast (允许backbonefast功能)</p>
<p>Swtich-6509&gt;(enable)set spantree backbonefast enable (允许backbonefast功能)</p>
<p>Switch-3548(config)#spanning-tree uplinkfast max-update-rate 32000 (uplinkfast功能max-update-rate值为32000)<br>Switch-3548(config)#spanning-tree uplinkfast (允许uplinkfast功能)</p>
<p>Swtich-6509&gt;(enable)set spantree uplinkfast enable (允许uplinkfast功能)<br>Swtich-6509&gt;(enable)set spantree uplinkfastenable rate 32000 (uplinkfast功能max-update-rate值为32000)</p>
<p>Switch-3548(config)#spanning-tree portfast enable   (打开portfast)<br>Switch-3548(config)#spanning-tree portfast disable (关闭portfast)<br>Switch-3548(config)#spanning-tree portfast default (缺省启用portfast)</p>
<p>Swtich-6509&gt;(enable)set spantree portfast enable (允许portfast功能)<br>Swtich-6509&gt;(enable)set spantree portfast disable (关闭portfast功能)<br>Swtich-6509&gt;(enable)set spantree portfast default (缺省启用portfast功能)</p>
<p>Switch-3548(config)#spanning-tree portfast bpdufilter befault (缺省启用bpdu filter)</p>
<p>Swtich-6509&gt;(enable)set spantree bpdu-filter enable (所有端口启用bpdu-filter功能)<br>Swtich-6509&gt;(enable)set spantree bpdu-filter disable (关闭bpdu-filter功能)<br>Swtich-6509&gt;(enable)set spantree bpdu-filter default (缺省启用bpdu-filter功能)<br>Swtich-6509&gt;(enable)set spantree bpdu-filter 0/1-24 enable (打开0/1-24的bpdu-filter功能)</p>
<p>二、路由器配置</p>
<p>路由器接口配置<br>Router(config)#int g1/2   (进入g1/2接口)<br>Router(config-if)#description To-Beijin University (配置接口描述信息为To-Beijin University)<br>Router(config-if)#bandwidth 2500000 (设置接口带宽为2.5Gbps)<br>Router(config-if)#ip address 202.112.7.249 255.255.255.252 (配置接口IP地址)<br>Router(config-if)#shutdown   (关闭接口)<br>Router(config-if)#no shutdown (开启接口)<br>Router(config-if)#no ip directed-broadcast (禁止定向广播通过此接口)<br>Router(config-if)#no ip proxy-arp (禁止代理ARP)</p>
<p>Router(config)#interface a1 (进入异步串行接口a1)<br>Router(config-if)#ip unnumbered ethernet0<br>Router(config-if)#encapsulation ppp<br>Router(config-if)#async default ip address 202.112.7.129<br>Router(config-if)#async dynamic routing<br>Router(config-if)#async mode interactive<br>Router(config-if)#no shutdown</p>
<p>Router(config)#interface s1/1 (进入高速同步串行接口s1/1)<br>Router(config-if)#description To-Shanhai<br>Router(config-if)#bandwidth 2048<br>Router(config-if)#ip address 202.112.7.129 255.255.255.252<br>Router(config-if)#encapsulation hdlc<br>Router(config-if)#no shutdown (开启接口)<br>Router(config-if)#no ip directed-broadcast (禁止定向广播通过此接口)<br>Router(config-if)#no ip proxy-arp (禁止代理ARP)</p>
<p>Router(config)#interface POS3/0 (进入接口POS3/0)<br>Router(config-if)#description To-Wuhan<br>Router(config-if)#bandwidth 2500000<br>Router(config-if)#ip address 202.112.7.129 255.255.255.252<br>Router(config-if)#crc 32               (可选的CRC校验位是32)<br>Router(config-if)#pos framing sdh     (可选帧格式为SDH)<br>Router(config-if)#no ip directed-broadcast (禁止定向广播通过此接口)<br>Router(config-if)#pos flag s1s0 2 (s1s0=00表示是SONET帧的数据,s1s0=10(十进制2)表示是SDH帧的数据)<br>Router(config-if)#no shutdown (开启接口)</p>
<p>Router(config)#interface loopback 0 (进入回环接口loopback0)<br>Router(config-if)#ip address 192.167.176.6 255.255.255.255 (配置接口IP地址,注意掩码)<br>Router(config-if)#no ip route-cache<br>Router(config-if)#no ip mroute-cache</p>
<p>静态路由配置<br>Router(config)#ip route 10.0.0.0 255.255.255.0 192.168.1.1 (目的网络地址、子网掩码、下一跳路由器IP)</p>
<p>RIP动态路由配置<br>Router(config)#router rip (启用并进入RIP路由协议配置模式)<br>Router(config-router)#network 159.105.0.0 (设置参与RIP协议的网络地址)<br>Router(config-router)#network 212.112.7.0<br>Router(config-router)#exit</p>
<p>Router(config)#router rip (启用并进入RIP路由协议配置模式)<br>Router(config-router)#passive-interface ethernet 0 (e0接口启用被动接口)<br>Router(config-router)#exit</p>
<p>Router(config)#access-list 12 deny any (建立标准扩展列表12)<br>Router(config)#router rip (启用并进入RIP路由协议配置模式)<br>Router(config-router)#distribute-list 12 in ethernet0 (e0接口启用路由过滤功能)<br>Router(config-router)#exit</p>
<p>Router(config)#router rip (启用并进入RIP路由协议配置模式)<br>Router(config-router)#network 159.105.0.0 (设置参与RIP协议的网络地址)<br>Router(config-router)#network 212.112.7.0<br>Router(config-router)#distance 50   (设置管理距离为50)<br>Router(config-router)#neighbor 202.112.7.2 (设置邻居路由器地址为202.112.7.2)<br>Router(config-router)#exit</p>
<p>OSPF动态路由配置<br>Router(config)#router ospf 100 (启用并进入OSPF路由协议配置模式，进程号100)<br>Router(config-router)#network 131.107.25.1 0.0.0.0 area 0 (设置参与OSPF协议的网络地址,区域0)<br>Router(config-router)#network 133.181.0.0 0.0.255.255 area 0 (设置参与OSPF协议的网络地址,区域0)<br>Router(config-router)#area 0 range 212.37.123.0 255.255.255.0 (定义参与OSPF的子网地址)</p>
<p>Router(config)#router ospf 200 (启用并进入OSPF路由协议配置模式，进程号200)<br>Router(config-router)#passive-interface ethernet 0 (e0接口启用被动接口)<br>Router(config-router)#passive-interface vlan37 (vlan37启用被动接口)</p>
<p>Router(config)#access-list 12 deny any (建立标准扩展列表12)<br>Router(config)#router ospf 200 (启用并进入OSPF路由协议配置模式，进程号200)<br>Router(config-router)#distribute-list 12 in serial 0 (S0接口启用路由过滤功能)<br>Router(config-router)#exit</p>
<p>Router(config)#router ospf 100 (启用并进入OSPF路由协议配置模式，进程号100)<br>Router(config-router)#network 131.107.25.1 0.0.0.0 area 0 (设置参与OSPF协议的网络地址,区域0)<br>Router(config-router)#network 133.181.0.0 0.0.255.255 area 0 (设置参与OSPF协议的网络地址,区域0)<br>Router(config-router)#distance 10 (设置管理距离为10)<br>Router(config-router)#redistribute metric 100 (设置OSFP引入外部路由的花费值为100)<br>Router(config-router)#redistribute tag 10 (设置OSFP引入外部路由时缺省的标记值为10)<br>Router(config-router)#redistribut connected metric-type 1 subnets(设置OSFP引入外部路由时缺省的外部路由类型为1)</p>
<p>三、安全配置</p>
<p>DHCP服务器的配置(必要五步1建池、2网段、3缺省网关、4DNS、5租约时间)<br>Router(config)#ip dhcp pool mydhcp (配置IP地址池的名称为mydhcp,并进入DHCP Pool配置模式)<br>Router(dhcp-config)#network 201.23.98.0 255.255.255.0 (配置IP地址池的子网地址和子网掩码)<br>Router(dhcp-config)#network 201.23.98.0/24 (配置IP地址池的子网地址和子网掩码)<br>Router(dhcp-config)#default-router 201.23.98.1 (配置IP地址池的缺省网关为201.23.98.1)<br>Router(dhcp-config)#domain-name pku.edu.cn (配置IP地址池的域名系统)<br>Router(dhcp-config)#dns-server address 201.105.126.27 212.105.129.26 (配置IP地址池的域名服务器地址)<br>Router(dhcp-config)#lease 0 5 30 (配置IP地址池的地址租用时间为0天5小时30分)<br>Router(dhcp-config)#lease infinitr (配置IP地址池的地址租用时间为不限制时间)<br>Router(dhcp-config)#exit<br>Router(config)#no ip dhcp conflict logging (取消地址冲突记录日志)</p>
<p>Router(config)#ip dhcp excluded-address 201.23.98.2 201.23.98.10 (配置不用于动态分配的地址，排除从201.23.98.2到201.23.98.10的一段IP地址)<br>Router(config)#ip dhcp excluded-address 201.23.98.2 (配置不用于动态分配的地址，排除201.23.98.2单个地址)</p>
<p>访问控制列表的配置</p>
<p>标准访问控制列表(1-99 只限制源地址 两步1建立ACL、2应用于接口)<br>Router(config)#access-list 10 permit 211.105.130.0 0.0.0.255 (建立标准访问控制列表10，允许源地址211.105.130.0/24网络)<br>Router(config)#line vty 0 4     (进入vty端口模式)<br>Router(config-line)#access-class 10 in   (将访问控制列表10应用在进接口)</p>
<p>Router(config)#access-list 30 deny 10.0.0.0 0.255.255.255 log<br>Router(config)#access-list 30 deny 192.168.0.0.255.255<br>Router(config)#access-list 30 deny 172.16.0.0 0.15.255.255<br>Router(config)#access-list 30 permit any<br>Router(config)#interface g0/1<br>Router(config-if)#ip access-group 30 in</p>
<p>扩展访问控制列表(100-199)<br>Router(config)#access-list 130 deny udp any any eq 1434 (拒接转发所有IP地址进出的，端口号为1434的UDP协议数据包)<br>Router(config)#access-list 130 permit ip any any<br>Router(config)#interface g0/1<br>Router(config-if)#ip access-group 130 in<br>Router(config-if)#ip access-group 130 out</p>
<p>Router(config)#access-list 110 deny ip host 202.112.60.230 any log (封禁IP地址为202.112.60.23的主机)<br>Router(config)#access-list 110 deny ip any host 202.112.60.230 log<br>Router(config)#access-list 110 permit ip any any<br>Router(config)#interface g0/1<br>Router(config-if)#ip access-group 110 in<br>Router(config-if)#ip access-group 110 out</p>
<p>Router(config)#access-list 198 permit icmp 162.105.141.0 0.0.0.255 any (封禁ICMP协议，只允许162.105.141/24子网的ICMP数据包通过路由器)<br>Router(config)#access-list 198 deny icmp any any<br>Router(config)#access-list 198 permit ip any any<br>Router(config)#interface g0/1<br>Router(config-if)#ip access-group 198 in<br>Router(config-if)#ip access-group 198 out</p>
<p>Router(config)#ip access-list extended 130 (拒接转发所有IP地址进出的，端口号为1434的UDP协议数据包)<br>Router(config-ext-nacl)#deny upd any any eq 1434<br>Router(config-ext-nacl)#permit ip any any<br>Router(config-ext-nacl)#exit<br>Router(config)#interface g0/1<br>Router(config-if)#ip access-group 130 in<br>Router(config-if)#ip access-group 130 out</p>
<p>Router(config)#ip access-list standard mylist (禁止源地址为非法地址的数据包进入路由器或从路由器输出)<br>Router(config-std-nacl)#deny 10.0.0.0 0.255.255.255 log<br>Router(config-std-nacl)#deny 192.168.0.0 0.0.255.255<br>Router(config-std-nacl)#deny 172.16.0.0 0.15.255.255<br>Router(config-std-nacl)#permit any<br>Router(config-std-nacl)#exit<br>Router(config)#interface g0/1<br>Router(config-if)#ip access-group mylist in<br>Router(config-if)#ip access-group mylist out</p>
<p>Router(config)#ip access-list extended myextlist (拒接转发所有IP地址进出的，端口号为1434的UDP协议数据包)<br>Router(config-ext-nacl)#deny upd any any eq 1434<br>Router(config-ext-nacl)#permit ip any any<br>Router(config-ext-nacl)#exit<br>Router(config)#interface g0/1<br>Router(config-if)#ip access-group myextlist in<br>Router(config-if)#ip access-group myextlist out</p>
<p>防火墙的配置<br>Pix525(config)#nameif ethernet0 outside security0 (配置防火墙的接口名字并指定安全级别(数字越大安全级别越高))<br>Pix525(config)#nameif ethernet0 inside security100<br>Pix525(config)#nameif dmz security50</p>
<p>Pix525(config)#interface ethernet0 auto (配置e0口自动协商方式)<br>Pix525(config)#interface ethernet1 100full (配置e1口采用100Mbps全双工通信)</p>
<p>Pix525(config)#ip adddress outside 202.113.79.1 255.255.255.240 (配置外网的ip地址)<br>Pix525(config)#ip adddress inside 192.168.0.1 255.255.255.0 (配置内网的ip地址)</p>
<p>Pix525(config)#net (inside) 1 192.168.0.1 255.255.255.0 (192.168.0.1这个网段内的主机可以访问外网)</p>
<p>Pix525(config)#global(outside) 1 202.113.79.1-202.113.79.14 (设置外部地址池为202.113.79.1至202.113.79.14)</p>
<p>Pix525(config)#router outside 0 0 202.81.20.1 1 (设置指向内网和外网的静态路由为202.81.20.1)</p>
<p>Pix525(config)#static (inside,outside) 202.113.79.4 192.168.0.4 (建立了内部IP地址192.168.0.4和外部地址202.113.79.4之间的静态映射)</p>
<p>Pix525(config)#conduit permit tcp host 192.168.0.4 eq www any (允许任何外部主机对全局地址192.168.0.4的这台主机进行http访问)</p>
<p>Pix525(config)#fixup protocol http 80 (启用http协议，并指定端口为80，通过pix防火墙)<br>Pix525(config)#no fixup protocol smtp (禁止smtp协议通过pix防火墙)</p>
<p>SNMP设置<br>(config)#snmp-server community public ro 4 (建立一个团体,团体名称为public,访问权限为只读,管理站的IP地址范围由4号ACL规定)<br>(config)#snmp-server community admin view part rw (建立一个团体,团体名称为admin,访问权限为可读写,访问MIB库的范围由视阈part规定)</p>
<p>(config)#snmp-server view part mib-2 included (建立一个视阈,名称为part,它包括mib-2整个子树的所有对象)</p>
<p>(config)#snmp-server view ext system included (建立一个视阈,名称为ext,它包括mib-2库中系统组的所有对象和Cisco私有库的所有对象)<br>(config)#snmp-server view ext cisco included</p>
<p>(config-if)#snmp trap link-status (在某个接口的配置模式下，指定当该接口端口或连接时要向管理站发出通知)</p>
<p>(config)#snmp-server enable traps (使该路由器可以向主机monitor.tj.edu.cn按照团体名public发送消息)<br>(config)#snmp-server host monitor.tj.edu.cn public</p>
<p>配置镜像端口<br>Switch(config)#monitor session 1 source interface Gi2/16 (配置被镜像端口)<br>Switch(config)#monitor session 1 destination interface Gi2/12 (配置镜像端口)<br>Switch#show monitor session 1 (检查镜像端口配置)</p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">I'm so cute. Please give me money.</div><div id="qr" style="display:none;"><div style="display:inline-block"></div><div style="display:inline-block"></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>澈崽子</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://zeozzz.github.com/2019/04/24/12/" title="Cisco 常用命令">https://zeozzz.github.com/2019/04/24/12/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2019/04/24/13/" rel="prev" title="H3C WA4330-ACN的指示灯说明"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">H3C WA4330-ACN的指示灯说明</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2019/04/24/11/" rel="next" title="服务器上的 Git - 协议"><span class="post-nav-text">服务器上的 Git - 协议</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="http://www.beian.miit.gov.cn" target="_blank"></a></div><div class="copyright"><span>&copy; 2015 – 2020 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 澈崽子</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v5.0.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v0.9.5</span></div><div class="live_time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2015-09-01T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div><div id="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv" title="总访客量"><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-user-line"></use></svg></span><span id="busuanzi_value_site_uv"></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv" title="总访问量"><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg></span><span id="busuanzi_value_site_pv"></span></span></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div id="local-search-result"></div></div></div><script defer src="/js/utils.js"></script><script defer src="/js/hexo-theme-yun.js"></script></body></html>