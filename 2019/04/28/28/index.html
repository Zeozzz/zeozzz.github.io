<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="澈崽子"><meta name="copyright" content="澈崽子"><meta name="generator" content="Hexo 5.0.0"><meta name="theme" content="hexo-theme-yun"><title>华为交换机端口无法UP故障排查思路 光衰查看 | 澈崽子 | 家有网工初长成</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="none" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.19/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_stqaphw3j4.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script defer src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.css"><script defer src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/auto-render.min.js"></script><script>document.addEventListener("DOMContentLoaded", function() {
  renderMathInElement(document.body, {
    delimiters: [
      {left: "$$", right: "$$", display: true},
      {left: "$", right: "$", display: false},
      {left: "\\(", right: "\\)", display: false},
      {left: "\\[", right: "\\]", display: true}
    ]
  });
});</script><link class="aplayer-style-marker" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script class="aplayer-script-marker" src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" defer></script><script class="meting-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js" defer></script><link rel="shortcut icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/hexo-theme-yun.css"><link rel="alternate" href="/atom.xml" title="澈崽子 | 家有网工初长成" type="application/atom+xml"><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"root":"/","title":"澈崽子的小窝","version":"0.9.5","anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><meta name="description" content="一、电口无法UP 1、故障现象 ​    网线相连的两个电口无法UP。 2、故障处理步骤 ​    请保存以下步骤的执行结果，以便故障无法解决时快速收集和反馈信息。 ​    2.1、检查端口是否被shutdown。首先检查故障端口有没有被shutdown或被拔掉网线，如果有shutdown的端口，则执行undo shutdown。 ​    2.2、检查两端端口配置。检查两端电口的端口配置是否正">
<meta property="og:type" content="article">
<meta property="og:title" content="华为交换机端口无法UP故障排查思路 光衰查看">
<meta property="og:url" content="https://zeozzz.github.com/2019/04/28/28/index.html">
<meta property="og:site_name" content="澈崽子 | 家有网工初长成">
<meta property="og:description" content="一、电口无法UP 1、故障现象 ​    网线相连的两个电口无法UP。 2、故障处理步骤 ​    请保存以下步骤的执行结果，以便故障无法解决时快速收集和反馈信息。 ​    2.1、检查端口是否被shutdown。首先检查故障端口有没有被shutdown或被拔掉网线，如果有shutdown的端口，则执行undo shutdown。 ​    2.2、检查两端端口配置。检查两端电口的端口配置是否正">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-04-28T14:05:27.000Z">
<meta property="article:modified_time" content="2019-04-29T03:24:03.078Z">
<meta property="article:author" content="澈崽子">
<meta property="article:tag" content="华为">
<meta name="twitter:card" content="summary"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script defer src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button sidebar-nav-active" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel sidebar-panel-active" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="澈崽子"><img width="96" loading="lazy" src="/avatar.jfif" alt="澈崽子"></a><div class="site-author-name"><a href="/about/">澈崽子</a></div><a class="site-name" href="/about/site.html">澈崽子 | 家有网工初长成</a><sub class="site-subtitle"></sub><div class="site-desciption">念念不忘 必有回响</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">75</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">29</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">36</span></a></div><a class="site-state-item hty-icon-button" href="/links/" title="常用链接"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" title="QQ 群" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Zeozzz" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://weibo.com/linche521chn" title="微博" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.douban.com/people/zeozzz/" title="豆瓣" target="_blank" style="color:#007722"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-douban-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=46666755" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/janz1995chn/activities" title="知乎" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/15054940" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/zeozzzzzz" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/zeozzzzz" title="Telegram Channel" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:zhangzhe@live.in" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.now.sh/" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-send-plane-2-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" target="_blank" rel="noopener" href="https://ispip.clang.cn/" title="IP归属查询" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-information-line"></use></svg></a><a class="links-item hty-icon-button" target="_blank" rel="noopener" href="http://ping.pe" title="ping工具" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-questionnaire-line"></use></svg></a><a class="links-item hty-icon-button" target="_blank" rel="noopener" href="https://photos.oneplus.com/cn" title="每日一图" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gallery-line"></use></svg></a><a class="links-item hty-icon-button" target="_blank" rel="noopener" href="https://smallpdf.com/cn" title="PDF工具" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></a><a class="links-item hty-icon-button" target="_blank" rel="noopener" href="https://www.runoob.com/" title="菜鸟教程" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-pushpin-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content">此文章未包含目录</div></div></div><div class="tag-cloud"><div class="tag-cloud-tags"><a href="/tags/802-1x/" style="font-size: 12px; color: #999">802.1x</a> <a href="/tags/ARP/" style="font-size: 12px; color: #999">ARP</a> <a href="/tags/CASE/" style="font-size: 12px; color: #999">CASE</a> <a href="/tags/Cisco/" style="font-size: 12px; color: #999">Cisco</a> <a href="/tags/H3C/" style="font-size: 30px; color: #0078e7">H3C</a> <a href="/tags/IDC/" style="font-size: 12px; color: #999">IDC</a> <a href="/tags/IPv6/" style="font-size: 24px; color: #3383cd">IPv6</a> <a href="/tags/LINUX/" style="font-size: 18px; color: #668eb3">LINUX</a> <a href="/tags/Linux/" style="font-size: 12px; color: #999">Linux</a> <a href="/tags/NAT/" style="font-size: 24px; color: #3383cd">NAT</a> <a href="/tags/OSPF/" style="font-size: 12px; color: #999">OSPF</a> <a href="/tags/RAID/" style="font-size: 12px; color: #999">RAID</a> <a href="/tags/SDN/" style="font-size: 24px; color: #3383cd">SDN</a> <a href="/tags/SSL/" style="font-size: 12px; color: #999">SSL</a> <a href="/tags/TCP/" style="font-size: 18px; color: #668eb3">TCP</a> <a href="/tags/TCP-IP/" style="font-size: 12px; color: #999">TCP/IP</a> <a href="/tags/VLAN/" style="font-size: 18px; color: #668eb3">VLAN</a> <a href="/tags/VPN/" style="font-size: 12px; color: #999">VPN</a> <a href="/tags/VXLAN/" style="font-size: 12px; color: #999">VXLAN</a> <a href="/tags/git/" style="font-size: 12px; color: #999">git</a></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://zeozzz.github.com/2019/04/28/28/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="澈崽子"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="澈崽子 | 家有网工初长成"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">华为交换机端口无法UP故障排查思路 光衰查看</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2019-04-28 22:05:27" itemprop="dateCreated datePublished" datetime="2019-04-28T22:05:27+08:00">2019-04-28</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="修改时间：2019-04-29 11:24:03" itemprop="dateModified" datetime="2019-04-29T11:24:03+08:00">2019-04-29</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="本文字数">2.7k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="阅读时长">11m</span></span></span><span class="post-busuanzi"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span id="busuanzi_value_page_pv"></span></span></span><div class="post-classify"><span class="post-tag"><a class="tag" href="/tags/%E5%8D%8E%E4%B8%BA/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">华为</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><p><strong>一、电口无法UP</strong></p>
<p>1、故障现象</p>
<p>​    网线相连的两个电口无法UP。</p>
<p>2、故障处理步骤</p>
<p>​    请保存以下步骤的执行结果，以便故障无法解决时快速收集和反馈信息。</p>
<p>​    2.1、检查端口是否被shutdown。首先检查故障端口有没有被shutdown或被拔掉网线，如果有shutdown的端口，则执行undo shutdown。</p>
<p>​    2.2、检查两端端口配置。检查两端电口的端口配置是否正确： 两边端口的速率、双工模式要一致；两边的自协商状态要一致，确保均工作在自协商模式下或者是非自协商模式下。</p>
<p>​    个别厂家设备跟华为交换机互连可能自协商不能link up，这时请将两端端口都尝试设置成强制方式。</p>
<p>​    2.3、检查MDI设置。MDI有三种模式，和网线是否是交叉网线有关，如果不确认网线类型，则将两端配置为auto模式。这三种模式对接的结果如下表1和下表2所示。</p>
<table>
<thead>
<tr>
<th>表1 平行网线对接表</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>平行网线</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>对接前电口MDI设置</td>
<td>对接后状态</td>
<td></td>
<td></td>
</tr>
<tr>
<td>端口A</td>
<td>端口B</td>
<td>端口A</td>
<td>端口B</td>
</tr>
<tr>
<td>GE电口AUTO</td>
<td>GE电口AUTO</td>
<td>UP</td>
<td>UP</td>
</tr>
<tr>
<td>FE电口AUTO</td>
<td>FE电口AUTO</td>
<td>UP</td>
<td>UP</td>
</tr>
<tr>
<td>FE电口AUTO</td>
<td>FE电口NORMAL</td>
<td>UP</td>
<td>UP</td>
</tr>
<tr>
<td>FE电口AUTO</td>
<td>FE电口ACROSS</td>
<td>UP</td>
<td>UP</td>
</tr>
<tr>
<td>FE电口ACROSS</td>
<td>FE电口NORMAL</td>
<td>UP</td>
<td>UP</td>
</tr>
<tr>
<td>FE电口ACROSS</td>
<td>FE电口ACROSS</td>
<td>DOWN</td>
<td>DOWN</td>
</tr>
<tr>
<td>FE电口NORMAL</td>
<td>FE电口NORMAL</td>
<td>DOWN</td>
<td>DOWN</td>
</tr>
<tr>
<td>表2 交叉网线对接表</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>交叉网线</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>对接前电口MDI设置</td>
<td>对接后状态</td>
<td></td>
<td></td>
</tr>
<tr>
<td>端口A</td>
<td>端口B</td>
<td>端口A</td>
<td>端口B</td>
</tr>
<tr>
<td>GE电口AUTO</td>
<td>GE电口AUTO</td>
<td>UP</td>
<td>UP</td>
</tr>
<tr>
<td>FE电口AUTO</td>
<td>FE电口AUTO</td>
<td>UP</td>
<td>UP</td>
</tr>
<tr>
<td>FE电口AUTO</td>
<td>FE电口NORMAL</td>
<td>UP</td>
<td>UP</td>
</tr>
<tr>
<td>FE电口AUTO</td>
<td>FE电口ACROSS</td>
<td>UP</td>
<td>UP</td>
</tr>
<tr>
<td>FE电口NORMAL</td>
<td>FE电口NORMAL</td>
<td>DOWN</td>
<td>DOWN</td>
</tr>
<tr>
<td>FE电口ACROSS</td>
<td>FE电口NORMAL</td>
<td>UP</td>
<td>UP</td>
</tr>
<tr>
<td>FE电口ACROSS</td>
<td>FE电口ACROSS</td>
<td>UP</td>
<td>UP</td>
</tr>
</tbody></table>
<p>3、检查链路。</p>
<p>​    3.1、排除网线问题：</p>
<p>​    看是否存在接触不好及网线外部损坏的情况；GE电口使用低于5类线的网线时接口不能UP；网线的4对线中有部分出现损坏，也不能够确保GE电口UP。</p>
<p>​    3.2、排除端口问题：</p>
<p>​    检查网口里面金属弹片是否凹陷或偏位；外环回和内环回测试。</p>
<p>​    3.3、测试链路的基本方法：</p>
<p>​    外环测试方法： 一般使用认为正常的端口来测试网线，端口能够UP即可，即交换机上的两个端口互连（注意现场的环路，可用临时建立其它vlan，两个端口配置不同的vlan）。</p>
<p>​    盒式交换机的设备可以执行virtual-cable-test命令, 用来查看链路是否存在有短路，交叉等的情况，再逐步来排除端口还是网线的问题。该命令行会导致该端口发生UP/DOWN。</p>
<p>​    对于端口是UP的，但是怀疑端口不能发包或收包，可以使用两个端口对接，分别在两个UP的端口执行test-packet start interface interface-type interface-number -c 来查看端口的统计计数是否正常，判断端口收发包是否正常。</p>
<p>​    [Quidway] test-packet start interface Ethernet 0/0/1 ?</p>
<p>​    -c    The number of packet</p>
<p>​    -s    The packet size</p>
<p>4、如果以上几步还是不能解决问题，请收集如下信息，并联系技术支持工程师。</p>
<p>​    上述步骤的执行结果；设备的配置文件、日志文件、告警信息；参考命令：display this interface、display logbuffer、display this。</p>
<p><strong>二、光口无法UP</strong></p>
<p>1、故障现象</p>
<p>​    两个光口互连时，端口无法UP。</p>
<p>2、故障处理步骤</p>
<p>​    请保存以下步骤的执行结果，以便故障无法解决时快速收集和反馈信息。</p>
<p>​    2.1、检查端口是否被shutdown。首先检查故障端口有没有被shutdown或被拔掉光纤，如果有shutdown的端口，则要执行命令undo shutdown。</p>
<p>​    2.2、检查两端端口配置。检查两端光口的端口配置是否按正确配置进行： 两边端口的速率要一致；两边端口的自协商模式要一致。</p>
<p>​    2.3、检查使用的光模块是否为华为认证的光模块。如果为非华为认证光模块，需替换为华为认证的光模块。</p>
<p>​    2.4、检查光纤、光模块是否配合使用正确：多模光纤需要与多模光模块配合使用；单模光纤只能用于单模光模块，不能够与多模光模块配合使用。 单模光纤一般为黄颜色，多模光纤一般为橘黄色。</p>
<p>​    2.5、在系统模式下输入display transceiver interface <em>interface-type interface-number</em>（故障点所在端口）verbose，查看对接光模块的波长是否一样。</p>
<p>​     <Quidway> display transceiver interface GigabitEthernet 0/1/1 verbose</p>
<p>​     GigabitEthernet0/1/1 transceiver information:</p>
<p>-————————————————————</p>
<p>Common information:</p>
<p>  Transceiver Type               :1000_BASE_SX_SFP</p>
<p>  Vendor PN                      :FTLF8519P3BTL-HW</p>
<p>  Connector Type                 :LC</p>
<p>  <strong>Wavelength(nm)                 :850</strong></p>
<p>  Transfer Distance(m)           :500(50um),300(62.5um)</p>
<p>  Digital Diagnostic Monitoring  :YES</p>
<p>  Vendor Name                    :FINISAR CORP.  </p>
<p>  Ordering Name                  :</p>
<p>-————————————————————</p>
<p>Diagnostic information:</p>
<p>  Temperature(℃ )              :27.00</p>
<p>  Temp High Threshold(℃ )      :90.00</p>
<p>  Temp Low  Threshold(℃ )      :-20.00</p>
<p>  Voltage(V)                    :3.27</p>
<p>  Volt High Threshold(V)        :3.70</p>
<p>  Volt Low  Threshold(V)        :2.90</p>
<p>  Bias Current(mA)              :6.94</p>
<p>  Bias High Threshold(mA)       :24.01</p>
<p>  Bias Low  Threshold(mA)       :1.75</p>
<p>  RX Power(dBM)                 :-28.54</p>
<p>  RX Power High Threshold(dBM)  :0.00</p>
<p>  RX Power Low  Threshold(dBM)  :-16.99</p>
<p>  TX Power(dBM)                 :-4.99</p>
<p>  TX Power High Threshold(dBM)  :0.00</p>
<p>  TX Power Low  Threshold(dBM)  :-9.50</p>
<p>-————————————————————</p>
<p>​    2.5、查看是否存在光口和光模块对应错误的情况：如100M光口使用了1000M光模块。</p>
<p>​    2.6、查看端口的收发光功率是否在正常范围内。光模块的收光光功率太低或太高都会导致端口不能UP，同时传输距离及光纤质量也是考虑因素。</p>
<p>​    2.7、自环测试。上述信息都正常的情况下，请做端口自环测试，将头纤及尾纤连接到同一个光模块上，确认端口是否能正常UP。</p>
<p>​    2.8、更换器件。仍不能确定问题的情况下，请优先考虑更换光模块及光纤。</p>
<p>​    2.9、如果以上几步还是不能解决问题，请收集如下信息，并联系技术支持工程师。 上述步骤的执行结果；设备的配置文件、日志文件、告警信息；参考命令：display this interface、display logbuffer、display this、display transceiver verbose。</p>
<p>如何查看华为交换机路由器光模块的收发光功率?</p>
<p>使用命令display transceiver verbose查看光模块的收发功率。版本不一样，显示信息有所差别，举例如下：</p>
<p>1、盒式交换机&amp;<strong>框式交换机 V100R006C03&amp;V100R006C05</strong>版本</p>
<p><strong>RX Power(dBM)**代表光模块接收功率，</strong>TX Power(dBM)**代表光模块发送功率。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line">&lt;Quidway&gt; **display transceiver interface gigabitethernet 0&#x2F;0&#x2F;1 verbose**</span><br><span class="line"></span><br><span class="line">GigabitEthernet0&#x2F;0&#x2F;1 transceiver information:                                  </span><br><span class="line"></span><br><span class="line">\-------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Common information:</span><br><span class="line"></span><br><span class="line">  Transceiver Type               :1000_BASE_SX_SFP</span><br><span class="line"></span><br><span class="line">  Connector Type                 :LC</span><br><span class="line"></span><br><span class="line">  Wavelength(nm)                 :850</span><br><span class="line"></span><br><span class="line">  Transfer Distance(m)           :300(50um),150(62.5um)</span><br><span class="line"></span><br><span class="line">  Digital Diagnostic Monitoring  :YES</span><br><span class="line"></span><br><span class="line">  Vendor Name                    :SumitomoElectric</span><br><span class="line"></span><br><span class="line">  Vendor Part Number             :HFBR-5710L</span><br><span class="line"></span><br><span class="line">  Ordering Name                  :</span><br><span class="line"></span><br><span class="line">\-------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Manufacture information:</span><br><span class="line"></span><br><span class="line">  Manu. Serial Number            :88K056C10353</span><br><span class="line"></span><br><span class="line">  Manufacturing Date             :2008-08-08</span><br><span class="line"></span><br><span class="line">  Vendor Name                    :SumitomoElectric</span><br><span class="line"></span><br><span class="line">\-------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">**Diagnostic information:**&#x2F;&#x2F;Diagnostic information这一段落仅V100R006C03版本显示</span><br><span class="line"></span><br><span class="line">  **Temperature(****°C)              :26.00**</span><br><span class="line"></span><br><span class="line">  **Temp High Threshold(****°C)      :85.00**</span><br><span class="line"></span><br><span class="line">  **Temp Low  Threshold(****°C)      :-40.00**</span><br><span class="line"></span><br><span class="line">  **Voltage(V)                    :3.29**</span><br><span class="line"></span><br><span class="line">  **Volt High Threshold(V)        :3.64**</span><br><span class="line"></span><br><span class="line">  **Volt Low  Threshold(V)        :2.95**</span><br><span class="line"></span><br><span class="line">  **Bias Current(mA)              :4.57**</span><br><span class="line"></span><br><span class="line">  **Bias High Threshold(mA)       :9.00**</span><br><span class="line"></span><br><span class="line">  **Bias Low  Threshold(mA)       :2.00**</span><br><span class="line"></span><br><span class="line">  **RX Power(dBM)                 :-40.00**</span><br><span class="line"></span><br><span class="line">  **RX Power High Threshold(dBM)  :0.00**</span><br><span class="line"></span><br><span class="line">  **RX Power Low  Threshold(dBM)  :-16.99**</span><br><span class="line"></span><br><span class="line">  **TX Power(dBM)                 :-5.03**</span><br><span class="line"></span><br><span class="line">  **TX Power High Threshold(dBM)  :-2.22**</span><br><span class="line"></span><br><span class="line">  **TX Power Low  Threshold(dBM)  :-6.99**</span><br><span class="line"></span><br><span class="line">**-------------------------------------------------------------**</span><br><span class="line"></span><br><span class="line">User information:</span><br><span class="line"></span><br><span class="line">  THIS_IS_A_TEST</span><br><span class="line"></span><br><span class="line">\-------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Diagnostic information:</span><br><span class="line"></span><br><span class="line">  Temperature(°C)                      :40.21</span><br><span class="line"></span><br><span class="line">  Temp High Warning Threshold(°C)      :93.00</span><br><span class="line"></span><br><span class="line">  Temp Low  Warning Threshold(°C)      :-30.00</span><br><span class="line"></span><br><span class="line">  Temp High Alarm   Threshold(°C)      :110.00</span><br><span class="line"></span><br><span class="line">  Temp Low  Alarm   Threshold(°C)      :-40.00</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  Voltage(V)                            :3.26</span><br><span class="line"></span><br><span class="line">  Volt High Warning Threshold(V)        :3.70</span><br><span class="line"></span><br><span class="line">  Volt Low  Warning Threshold(V)        :2.90</span><br><span class="line"></span><br><span class="line">  Volt High Alarm   Threshold(V)        :3.90</span><br><span class="line"></span><br><span class="line">  Volt Low  Alarm   Threshold(V)        :2.70</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  Bias Current(mA)                      :23.78</span><br><span class="line"></span><br><span class="line">  Bias High Warning Threshold(mA)       :70.00</span><br><span class="line"></span><br><span class="line">  Bias Low  Warning Threshold(mA)       :4.00</span><br><span class="line"></span><br><span class="line">  Bias High Alarm   Threshold(mA)       :80.00</span><br><span class="line"></span><br><span class="line">  Bias Low  Alarm   Threshold(mA)       :2.00</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  **RX Power(dBM)**                         :-31.10</span><br><span class="line"></span><br><span class="line">  RX Power High Warning Threshold(dBM)  :-1.00</span><br><span class="line"></span><br><span class="line">  RX Power Low  Warning Threshold(dBM)  :-20.00</span><br><span class="line"></span><br><span class="line">  RX Power High Alarm   Threshold(dBM)  :0.75</span><br><span class="line"></span><br><span class="line">  RX Power Low  Alarm   Threshold(dBM)  :-23.97</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  **TX Power(dBM)**                         :-5.78</span><br><span class="line"></span><br><span class="line">  TX Power High Warning Threshold(dBM)  :-1.00</span><br><span class="line"></span><br><span class="line">  TX Power Low  Warning Threshold(dBM)  :-11.50</span><br><span class="line"></span><br><span class="line">  TX Power High Alarm   Threshold(dBM)  :0.99</span><br><span class="line"></span><br><span class="line">  TX Power Low  Alarm   Threshold(dBM)  :-13.50</span><br><span class="line"></span><br><span class="line">\-------------------------------------------------------------</span><br></pre></td></tr></table></figure>



<p><strong>2**</strong>、框式交换机 V200R002&amp;V200R003**<strong>版本</strong></p>
<p><strong>Current Rx Power(dBM)**代表光模块当前接收功率， **Current Tx Power(dBM</strong>)代表光模块当前发送功率。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;Quidway&gt; **display transceiver interface gigabitethernet 3&#x2F;0&#x2F;0 verbose**</span><br><span class="line"></span><br><span class="line">GigabitEthernet3&#x2F;0&#x2F;0 transceiver information:                       </span><br><span class="line"></span><br><span class="line">\-------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Common information:</span><br><span class="line"></span><br><span class="line">  Transceiver Type               :1000_BASE_SX_SFP</span><br><span class="line"></span><br><span class="line">  Connector Type                 :LC</span><br><span class="line"></span><br><span class="line">  Wavelength(nm)                 :850</span><br><span class="line"></span><br><span class="line">  Transfer Distance(m)           :500(50um),300(62.5um)</span><br><span class="line"></span><br><span class="line">  Digital Diagnostic Monitoring  :YES</span><br><span class="line"></span><br><span class="line">  Vendor Name                    :FINISAR CORP.</span><br><span class="line"></span><br><span class="line">  Vendor Part Number             :FTLF8519P2BNL-HW</span><br><span class="line"></span><br><span class="line">  Ordering Name                  :</span><br><span class="line"></span><br><span class="line">\-------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Manufacture information:</span><br><span class="line"></span><br><span class="line">  Manu. Serial Number            :PEP3L5D</span><br><span class="line"></span><br><span class="line">  Manufacturing Date             :2008-12-05</span><br><span class="line"></span><br><span class="line">  Vendor Name                    :FINISAR CORP.</span><br><span class="line"></span><br><span class="line">\-------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Alarm information:</span><br><span class="line"></span><br><span class="line">  TX power low</span><br><span class="line"></span><br><span class="line">\-------------------------------------------------------------                  </span><br><span class="line"></span><br><span class="line">Diagnostic information:</span><br><span class="line"></span><br><span class="line">  Temperature(°C)                       :39</span><br><span class="line"></span><br><span class="line">  Voltage(V)                            :3.31</span><br><span class="line"></span><br><span class="line">  Bias Current(mA)                      :6.59</span><br><span class="line"></span><br><span class="line">  Bias High Threshold(mA)               :10.50</span><br><span class="line"></span><br><span class="line">  Bias Low  Threshold(mA)               :2.50</span><br><span class="line"></span><br><span class="line">  **Current Rx Power(dBM)**                 :-2.23</span><br><span class="line"></span><br><span class="line">  Default Rx Power High Threshold(dBM)  :3.01</span><br><span class="line"></span><br><span class="line">  Default Rx Power Low  Threshold(dBM)  :-15.02</span><br><span class="line"></span><br><span class="line">  **Current Tx Power(dBM**)                 :-2.45</span><br><span class="line"></span><br><span class="line">  Default Tx Power High Threshold(dBM)  :3.01</span><br><span class="line"></span><br><span class="line">  Default Tx Power Low  Threshold(dBM)  :-9.00</span><br><span class="line"></span><br><span class="line">  User Set Rx Power High Threshold(dBM) :3.01</span><br><span class="line"></span><br><span class="line">  User Set Rx Power Low Threshold(dBM)  :-15.02</span><br><span class="line"></span><br><span class="line">  User Set Tx Power High Threshold(dBM) :3.01</span><br><span class="line"></span><br><span class="line">  User Set Tx Power Low Threshold(dBM)  :-9.00</span><br></pre></td></tr></table></figure>

<p>-————————————————————</p>
<p><strong>3、那么如何保证光模块的收发功率?</strong></p>
<p>​    光模块的诊断信息中，可以查看当前发送和接收的光功率值，以及默认的最高和最低功率值。</p>
<p>​    如果接收功率低（RxPower Low），说明本端接收到的信号过低，则可能出现端口不UP或者UP后报文收发有丢弃，此时请先排查传输距离是否过远，超出了该光模块的传输距离，再排查链路，如光模块、光纤是否有损坏，光纤单模多模是否用错，熔纤连接处质量是否可靠等，以及对端光模块发送功率是否过低。</p>
<p>​    如果接收功率高（RxPower High），说明本端接收到的信号过高，可能原因是该光模块为长距光模块，而实际传输距离太短，导致信号未衰减，此时应在光模块上增加光衰，以对光模块进行保护。</p>
<p>​    如果发送功率低（TxPower Low），说明该光模块发送信号不好，可能会导致对端接收功率低，而造成端口不UP或者UP后报文收发有丢弃，可能原因是光模块光口受污染，如灰尘积的太多等，此时请用棉签清洗光模块，然后再测试光口发光功率是否恢复正常。</p>
<p>​    如果发送功率高（TxPower High），说明该光模块发送信号太强，可能会导致对端接收功率高，而造成对端光模块因接收功率持续过高而烧坏，可能原因是本端光模块故障，建议更换光模块。</p>
<p>​    因此，在端口插入光模块并对接成功后，要对发送或接收光功率方面的告警信息进行排查，避免因功率过低或者过高造成流量或者光模块不正常。</p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">如果帮助到了您，欢迎请我喝杯冰阔落~</div><div id="qr" style="display:none;"><div style="display:inline-block"><a href="/img/Alipay.png"><img loading="lazy" src="/img/Alipay.png" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a href="/img/WeChatPay.png"><img loading="lazy" src="/img/WeChatPay.png" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>澈崽子</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://zeozzz.github.com/2019/04/28/28/" title="华为交换机端口无法UP故障排查思路 光衰查看">https://zeozzz.github.com/2019/04/28/28/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2019/04/29/29/" rel="prev" title="NGINX入门理解"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">NGINX入门理解</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2019/04/28/27/" rel="next" title="华为VRRP详解"><span class="post-nav-text">华为VRRP详解</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="http://www.beian.miit.gov.cn" target="_blank">冀ICP备15029595号-1</a></div><div class="copyright"><span>&copy; 2015 – 2020 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 澈崽子</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v5.0.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v0.9.5</span></div><div class="live_time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2015-09-01T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div><div id="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv" title="总访客量"><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-user-line"></use></svg></span><span id="busuanzi_value_site_uv"></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv" title="总访问量"><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg></span><span id="busuanzi_value_site_pv"></span></span></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div id="local-search-result"></div></div><script>let date = new Date();
let today = (date.getMonth() + 1) + "-" + date.getDate()
if ("4-4,9-18".indexOf(today) !== -1) {
  document.documentElement.style.filter = "grayscale(1)";
}</script></div><script defer src="/js/utils.js"></script><script defer src="/js/hexo-theme-yun.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"live2d-widget-model-hijiki"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"tagMode":false});</script></body></html>